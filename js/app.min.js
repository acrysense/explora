"use strict";function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function switchDeck(e,t){var n=t?t.querySelectorAll(".deck"):document.querySelectorAll(".deck"),o=null;if(n.forEach((function(t){var n=t.dataset.deck===e;t.classList.toggle("is-active",n),n&&(o=t)})),o){var r=o.closest(".booking-location-cabin")||t;if(r){var i=r.querySelector('.select-box__radio[data-deck-target="'.concat(e,'"]'));if(i){var a;i.checked=!0;var c=null===(a=i.closest(".select-box__option"))||void 0===a||null===(a=a.querySelector(".select-box__title"))||void 0===a||null===(a=a.textContent)||void 0===a?void 0:a.trim(),s=r.querySelector(".select-box__placeholder");s&&c&&(s.textContent=c)}}}}function initDeck(e){var t=e.querySelector(".js-deck-svg"),n=e.querySelector(".deck__svg-inner"),o=e.querySelector(".deck__svg-wrap"),r=e.querySelector(".booking-cabin__buttons");if(t&&n&&o&&r){var i=new Set((e.dataset.unavailable||"").split(",").map((function(e){return e.trim()})).filter(Boolean)),a=t.querySelector("#каюты");if(a)a.querySelectorAll("g[id]").forEach((function(e){if(!e.dataset.cabin){var t=(e.id||"").match(/(\d{3,})$/);t&&(e.dataset.cabin=t[1])}}));var c=Array.from(t.querySelectorAll("[data-cabin]"));c.forEach((function(e){var t=e.dataset.cabin;t&&i.has(t)&&e.classList.add("cabin--unavailable")}));var s=Array.from(r.querySelectorAll(".booking-cabin__button"));if(!s.length&&c.length){var l=new Set;c.forEach((function(e){var t=e.dataset.cabin;t&&!i.has(t)&&l.add(t)})),Array.from(l).sort((function(e,t){return Number(e)-Number(t)})).forEach((function(e){var t=document.createElement("button");t.type="button",t.className="booking-cabin__button",t.dataset.cabin=e,t.value=e,t.textContent=e,r.appendChild(t)})),s=Array.from(r.querySelectorAll(".booking-cabin__button"))}var d=new Map,u=new Map;s.forEach((function(e){var t=(e.dataset.cabin||e.textContent).trim();t&&!i.has(t)&&(e.dataset.cabin=t,e.value=t,d.set(t,e))})),c.forEach((function(e){var t=e.dataset.cabin;t&&u.set(t,e)}));var v=1,m=0,f=0,y=4,p=.2,h=2;window.matchMedia("(max-width: 743px)").matches&&(v=3,p=.5,h=5,y=6);var b=e.querySelector(".deck__zoom--in"),g=e.querySelector(".deck__zoom--out");b&&b.addEventListener("click",(function(){v=Math.min(y,v+p),k()})),g&&g.addEventListener("click",(function(){(v=Math.max(.6,v-p))<=1.01&&(m=0,f=0),k()}));var _=!1,L=0,w=0,E=0,S=0,x=null;o.addEventListener("pointerdown",(function(e){0!==e.button&&"mouse"===e.pointerType||(_=!0,x=e.pointerId,L=e.clientX,w=e.clientY,E=m,S=f)})),o.addEventListener("pointermove",(function(e){if(_&&e.pointerId===x){var t=e.clientX-L,n=e.clientY-w;m=E+t,f=S+n,k()}})),o.addEventListener("pointerup",A),o.addEventListener("pointercancel",A),o.addEventListener("pointerleave",(function(e){"mouse"===e.pointerType&&A(e)})),r.addEventListener("click",(function(e){var t=e.target.closest(".booking-cabin__button");if(t){var n=(t.dataset.cabin||t.textContent).trim();n&&!i.has(n)&&q(n,!0)}})),c.forEach((function(e){var t=e.dataset.cabin;t&&(i.has(t)||(e.style.cursor="pointer",e.addEventListener("click",(function(){q(t,!1)}))))})),k()}function k(){n.style.transform="translate(".concat(m,"px, ").concat(f,"px) scale(").concat(v,")");var e=o.getBoundingClientRect(),t=n.getBoundingClientRect(),r=40,i=0,a=0;t.width>e.width?t.left>e.left+r?i=e.left+r-t.left:t.right<e.right-r&&(i=e.right-r-t.right):i=e.left+e.width/2-(t.left+t.width/2);t.height>e.height?t.top>e.top+r?a=e.top+r-t.top:t.bottom<e.bottom-r&&(a=e.bottom-r-t.bottom):a=e.top+e.height/2-(t.top+t.height/2);(i||a)&&(m+=i,f+=a,n.style.transform="translate(".concat(m,"px, ").concat(f,"px) scale(").concat(v,")"))}function q(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!i.has(e)){var n=u.get(e);if(n){s.forEach((function(e){return e.classList.remove("is--active")})),c.forEach((function(e){return e.classList.remove("cabin--selected")}));var r=d.get(e);r&&r.classList.add("is--active"),n.classList.add("cabin--selected"),t&&function(e){v=Math.min(y,Math.max(h,v)),m=0,f=0,k();var t=o.getBoundingClientRect(),n=e.getBoundingClientRect(),r=n.left+n.width/2,i=n.top+n.height/2,a=t.left+t.width/2,c=t.top+t.height/2;m=a-r,f=c-i,k()}(n)}}}function A(e){!_||null!==x&&e.pointerId!==x||(_=!1,x=null)}}document.addEventListener("DOMContentLoaded",(function(){var e="ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0,t=function(e,t){var n=!1,o=function(n){for(var o=n.target;o;){if(e.includes(o))return;o=o.parentNode}t(),r()};function r(){n&&(document.documentElement.removeEventListener("click",o),n=!1)}return{setBodyChecker:function(){n||(document.documentElement.addEventListener("click",o),n=!0)},removeBodyChecker:r}};function n(e){var t=0,n=window.innerWidth-document.body.offsetWidth+"px",o=document.querySelectorAll(".fixed");e?(document.body.classList.add("scroll-disabled"),t=window.pageYOffset,document.body.style.overflow="hidden",document.body.style.position="fixed",document.body.style.top?document.body.style.top=document.body.style.top:document.body.style.top="-"+t+"px",document.body.style.width="100%",document.body.style.paddingRight=n,o&&o.forEach((function(e){e.style.marginRight=n}))):(document.body.classList.remove("scroll-disabled"),t=Math.abs(parseInt(document.querySelector("body").style.top.replace("px",""))),document.body.style.removeProperty("overflow"),document.body.style.removeProperty("position"),document.body.style.removeProperty("top"),document.body.style.removeProperty("width"),document.body.style.removeProperty("padding-right"),o&&o.forEach((function(e){e.style.removeProperty("margin-right")})),window.scrollTo({top:isNaN(t)?0:t,behavior:"instant"}))}function o(e){document.querySelectorAll(".decks-tabs__item").forEach((function(e){e.classList.remove("is--active")}));var t=e.closest(".decks-tabs__item");t&&t.classList.add("is--active"),m[0].src=e.dataset.deck}function r(){var e=document.querySelectorAll(".c-info"),t=window.innerWidth;e.forEach((function(e){var n=e.querySelector(".c-info__dropdown");if(n)if(t<=743){var o=e.getBoundingClientRect();n.style.left="-".concat(o.left-20,"px")}else n.style.left=""}))}document.querySelectorAll(".c-info")&&(!function(){var n=document.querySelectorAll(".c-info__trigger");n.length>0&&n.forEach((function(n){var o=function(){n.closest(".c-info").classList.remove("is--active")},r=t([n],o);n.addEventListener("click",(function(t){if(t.preventDefault(),e){var i=n.closest(".c-info");i.classList.contains("is--active")?o():(i.classList.add("is--active"),r.setBodyChecker())}}))}))}(),r()),Inputmask().mask(document.querySelectorAll("input"));var i=document.querySelectorAll("textarea");i&&i.forEach((function(e){e.style.height=e.setAttribute("style","height: "+e.scrollHeight+"px"),e.classList.add("auto"),e.addEventListener("input",(function(t){e.style.height="auto",e.style.height=e.scrollHeight+"px"}))}));var a=document.querySelectorAll(".select-box__selected"),c=document.querySelectorAll(".select-box__option");a&&a.forEach((function(e){var n=function(){document.querySelectorAll(".select-box__container").forEach((function(e){e.classList.remove("select-box__container--active"),e.removeAttribute("style")})),document.querySelectorAll(".select-box__selected").forEach((function(e){return e.classList.remove("select-box__selected--active")}))},o=t([e.parentNode].concat(_toConsumableArray(a)),n);e.addEventListener("click",(function(){var t=e.previousElementSibling;t.classList.contains("select-box__container--active")?n():(n(),t.classList.add("select-box__container--active"),e.classList.add("select-box__selected--active"),o.setBodyChecker())}))})),c&&c.forEach((function(e){e.addEventListener("click",(function(t){t.preventDefault();var n=e.closest(".select-box"),o=n.querySelector(".select-box__container"),r=n.querySelector(".select-box__selected"),i=r.querySelector(".select-box__placeholder"),a=r.querySelector(".select-box__values");if(n.classList.contains("select-box--single")){if(e.querySelector("input").checked)return!1;e.querySelector("input").checked=!0,i.classList.contains("select-box__placeholder--active")&&(i.classList.remove("select-box__placeholder--active"),a.classList.add("select-box__values--active")),a.innerHTML=e.querySelector(".select-box__title").innerHTML,o.classList.remove("select-box__container--active"),r.classList.remove("select-box__selected--active")}else if(e.querySelector("input").checked){e.querySelector("input").checked=!1;var c=a.innerHTML.split(", ");if(c.length>1){var s=c.indexOf(e.querySelector(".select-box__title").innerHTML);c.splice(s,1);a.innerHTML=c.join(", ")}else i.classList.contains("select-box__placeholder--active")||(i.classList.add("select-box__placeholder--active"),a.classList.remove("select-box__values--active")),a.innerHTML=""}else e.querySelector("input").checked=!0,i.classList.contains("select-box__placeholder--active")?a.innerHTML+=e.querySelector(".select-box__title").innerHTML:a.innerHTML+=", "+e.querySelector(".select-box__title").innerHTML,i.classList.contains("select-box__placeholder--active")&&(i.classList.remove("select-box__placeholder--active"),a.classList.add("select-box__values--active"))}))}));var s=document.getElementById("mobile-menu"),l=document.getElementById("hamburger-toggle"),d=document.querySelector(".mobile-menu__close");s&&l&&(l.addEventListener("click",(function(e){e.preventDefault(),s.classList.contains("is--active")?(s.classList.remove("is--active"),n(0)):(s.classList.add("is--active"),n(1))})),d&&d.addEventListener("click",(function(e){e.preventDefault(),s.classList.contains("is--active")&&(s.classList.remove("is--active"),n(0))})));var u=document.querySelectorAll(".events-card__trigger");u&&u.forEach((function(e){e.addEventListener("click",(function(t){t.preventDefault(),e.closest(".events-card").classList.contains("is--open")?function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:400;e.style.transitionProperty="height, margin, padding",e.style.transitionDuration=t+"ms",e.style.height=e.offsetHeight+"px",e.offsetHeight,e.style.overflow="hidden",e.style.height=0,e.style.paddingTop=0,e.style.paddingBottom=0,e.style.marginTop=0,e.style.marginBottom=0,e.previousElementSibling&&(e.previousElementSibling.style.pointerEvents="none"),window.setTimeout((function(){e.style.display="none",e.style.removeProperty("height"),e.style.removeProperty("padding-top"),e.style.removeProperty("padding-bottom"),e.style.removeProperty("margin-top"),e.style.removeProperty("margin-bottom"),e.style.removeProperty("overflow"),e.style.removeProperty("transition-duration"),e.style.removeProperty("transition-property"),e.previousElementSibling&&(e.previousElementSibling.style.pointerEvents="auto")}),t),e.parentNode.classList.remove("is--open")}(e.closest(".events-card__top").nextElementSibling):function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:400;e.style.removeProperty("display");var n=window.getComputedStyle(e).display;"none"===n&&(n="block"),e.style.display=n;var o=e.offsetHeight;e.style.overflow="hidden",e.style.height=0,e.style.paddingTop=0,e.style.paddingBottom=0,e.style.marginTop=0,e.style.marginBottom=0,e.offsetHeight,e.style.transitionProperty="height, margin, padding",e.style.transitionDuration=t+"ms",e.style.height=o+"px",e.style.removeProperty("padding-top"),e.style.removeProperty("padding-bottom"),e.style.removeProperty("margin-top"),e.style.removeProperty("margin-bottom"),e.previousElementSibling&&(e.previousElementSibling.style.pointerEvents="none"),window.setTimeout((function(){e.style.removeProperty("height"),e.style.removeProperty("overflow"),e.style.removeProperty("transition-duration"),e.style.removeProperty("transition-property"),e.previousElementSibling&&(e.previousElementSibling.style.pointerEvents="auto")}),t),e.parentNode.classList.add("is--open")}(e.closest(".events-card__top").nextElementSibling)}))}));var v=document.querySelectorAll(".decks-tabs__tab"),m=document.querySelectorAll(".decks__image img");v&&m&&(v.length>0||2==m.length)&&(v.forEach((function(e){e.addEventListener("click",(function(){o(this)}))})),o(v[0]));var f=document.querySelector(".main__slider .swiper");if(f)new Swiper(f,{slidesPerView:1,loop:!0,speed:1200,parallax:!0,watchSlidesProgress:!0,autoplay:{delay:5e3},on:{beforeSlideChangeStart:function(){f.style.pointerEvents="none"},slideChangeTransitionEnd:function(){f.style.pointerEvents="auto"}}});var y=document.querySelector(".directions__slider .swiper");if(y)new Swiper(y,{slidesPerView:5,spaceBetween:8,loop:!0,breakpoints:{0:{slidesPerView:"auto"},744:{slidesPerView:3},1024:{slidesPerView:5}}});var p=document.querySelector(".cruises__slider .swiper");if(p)new Swiper(p,{slidesPerView:2,spaceBetween:32,loop:!0,navigation:{prevEl:".cruises__slider .swiper-button-prev",nextEl:".cruises__slider .swiper-button-next"},breakpoints:{0:{slidesPerView:1,spaceBetween:20},744:{slidesPerView:1,spaceBetween:16},1024:{slidesPerView:2,spaceBetween:32}}});var h=document.querySelectorAll(".cabins__slider .swiper");h&&h.forEach((function(e){new Swiper(e,{slidesPerView:1,spaceBetween:0,loop:!0,navigation:{prevEl:e.closest(".cabins__slider").querySelector(".swiper-button-prev"),nextEl:e.closest(".cabins__slider").querySelector(".swiper-button-next")},pagination:{el:".cabins__slider .swiper-pagination",clickable:!0}})}));var b=document.querySelector(".fleet__slider"),g=document.querySelectorAll(".fleet__slide"),_=0;function L(){var e=b.clientWidth-(g.length-1)*_;window.innerWidth>=744?g.forEach((function(e){e.style.width=_+"px"})):g.forEach((function(e){e.style.height="60px"}));var t=b.querySelector(".fleet__slide.active");t&&(window.innerWidth>=744?t.style.width=e+"px":t.style.height="506px")}b&&g&&(_=parseFloat(getComputedStyle(g[0]).width),g.forEach((function(e){e.addEventListener("click",(function(){g.forEach((function(e){return e.classList.remove("active")})),e.classList.add("active"),L()}))})),L()),window.addEventListener("resize",(function(){b&&g&&L(),document.querySelectorAll(".c-info")&&r()})),window.addEventListener("scroll",(function(){var e=document.querySelector(".header");e&&(e.classList.contains("header--static")?window.innerWidth>=1024?window.scrollY>=72?e.classList.add("is--fixed"):e.classList.remove("is--fixed"):window.scrollY>=22?e.classList.add("is--fixed"):e.classList.remove("is--fixed"):window.scrollY>=230?e.classList.add("is--fixed"):e.classList.remove("is--fixed"))}));var w=document.querySelector(".booking-result__slider .swiper");if(w)new Swiper(w,{slidesPerView:1,loop:!0,navigation:{prevEl:".booking-result__slider .swiper-button-prev",nextEl:".booking-result__slider .swiper-button-next"},pagination:{el:".booking-result__slider .swiper-pagination",clickable:!0}});var E=document.querySelectorAll(".modal-info__slider .swiper");if(E&&E.forEach((function(e){new Swiper(e,{slidesPerView:1,spaceBetween:0,loop:!0,navigation:{prevEl:e.closest(".modal-info__slider").querySelector(".swiper-button-prev"),nextEl:e.closest(".modal-info__slider").querySelector(".swiper-button-next")},pagination:{el:".modal-info__slider .swiper-pagination",clickable:!0}})})),document.getElementById("modal-filter-calendar")){var S=function(e){var t=e.target,n=parseInt(t.dataset.year),o=parseInt(t.dataset.month);T?C?(k(),T={year:n,month:o,element:t},t.classList.add("selected")):n<T.year||n===T.year&&o<T.month?(T.element.classList.remove("selected"),T={year:n,month:o,element:t},t.classList.add("selected")):(C={year:n,month:o,element:t},x()):(T={year:n,month:o,element:t},t.classList.add("selected")),q()},x=function(){document.querySelectorAll(".month").forEach((function(e){return e.classList.remove("selected","start","end")})),T.element.classList.add("selected"),C.element.classList.add("selected"),document.querySelectorAll(".month").forEach((function(e){var t=parseInt(e.dataset.year),n=parseInt(e.dataset.month);(t>T.year||t===T.year&&n>=T.month)&&(t<C.year||t===C.year&&n<=C.month)&&e.classList.add("selected")})),document.querySelectorAll(".year-container").forEach((function(e){var t=e.querySelectorAll(".month.selected");if(t.length>0){var n=Array.from(t).reduce((function(e,t){return parseInt(t.dataset.month)<parseInt(e.dataset.month)?t:e})),o=Array.from(t).reduce((function(e,t){return parseInt(t.dataset.month)>parseInt(e.dataset.month)?t:e}));n.classList.add("start"),o.classList.add("end")}}))},k=function(){T=null,C=null,document.querySelectorAll(".month").forEach((function(e){return e.classList.remove("selected","start","end")}))},q=function(){},A=document.getElementById("main-filter-calendar"),P=(new Date).getFullYear(),T=null,C=null;document.getElementById("main-filter-calendar-clear").addEventListener("click",k),[P-1,P,P+1].forEach((function(e){A.appendChild(function(e){var t=document.createElement("div");t.classList.add("year-container");var n=document.createElement("span");n.textContent=e,n.classList.add("year-title"),t.appendChild(n);var o=document.createElement("div");return o.classList.add("months-container"),["Янв","Фев","Мар","Апр","Май","Июн","Июл","Авг","Сен","Окт","Ноя","Дек"].forEach((function(t,n){var r=document.createElement("div");r.classList.add("month"),r.textContent=t,r.dataset.year=e,r.dataset.month=n+1,e<P||e===P&&n<(new Date).getMonth()?r.classList.add("disabled"):r.addEventListener("click",S),o.appendChild(r)})),t.appendChild(o),t}(e))}))}var B=document.querySelector(".search-sort__trigger"),I=document.querySelector(".search-results__filter");B&&I&&B.addEventListener("click",(function(e){e.preventDefault(),I.classList.contains("is--active")?I.classList.remove("is--active"):I.classList.add("is--active")}));var M=document.querySelectorAll(".booking-location-cabin__btn");M&&M.forEach((function(e){e.addEventListener("click",(function(t){t.preventDefault(),M.forEach((function(e){return e.classList.remove("is--active")})),e.classList.add("is--active")}))}));var D=document.querySelectorAll(".modal"),H=document.querySelectorAll(".modal-btn"),V=document.querySelectorAll(".modal__close");D&&H&&V&&(D.forEach((function(e){e.addEventListener("click",(function(e){(e.target.classList.contains("modal")||e.target.classList.contains("modal__wrap"))&&(e.preventDefault(),document.querySelectorAll(".modal.is--active").forEach((function(e){return e.classList.remove("is--active")})),document.body.classList.remove("scroll-disabled"))}))})),H.forEach((function(e,t){e.addEventListener("click",(function(t){t.preventDefault();var n=e.dataset.id;document.querySelectorAll(".modal.is--active").forEach((function(e){return e.classList.remove("is--active")})),document.getElementById(n).classList.add("is--active"),document.body.classList.add("scroll-disabled")}))})),V.forEach((function(e){e.addEventListener("click",(function(e){e.preventDefault(),document.querySelectorAll(".modal.is--active").forEach((function(e){return e.classList.remove("is--active")})),document.body.classList.remove("scroll-disabled")}))}))),Fancybox.bind("[data-fancybox]",{Toolbar:{display:{left:[],middle:[],right:["close"]}},Carousel:{Navigation:{prevTpl:'<svg class="f-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"><path d="M15.975 22L17.75 20.225L9.525 12L17.75 3.775L15.975 2L5.975 12L15.975 22Z" fill="currentColor"/></svg>',nextTpl:'<svg class="f-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"><path d="M8.025 22L6.25 20.225L14.475 12L6.25 3.775L8.025 2L18.025 12L8.025 22Z" fill="currentColor"/></svg>'}}})})),document.addEventListener("DOMContentLoaded",(function(){document.querySelectorAll(".deck").forEach(initDeck),document.querySelectorAll(".booking-location-cabin").forEach((function(e){var t=e.querySelector(".select-box__radio[data-deck-target][checked]");t&&switchDeck(t.dataset.deckTarget,e)})),document.addEventListener("change",(function(e){var t=e.target.closest(".select-box__radio[data-deck-target]");if(t&&t.checked){var n=t.closest(".booking-location-cabin");if(n){var o=t.dataset.deckTarget;o&&switchDeck(o,n)}}})),document.addEventListener("click",(function(e){var t=e.target.closest(".booking-location-cabin .select-box__option");if(t){var n=t.querySelector(".select-box__radio[data-deck-target]");if(n){var o=t.closest(".booking-location-cabin");if(o){var r=n.dataset.deckTarget;r&&(n.checked=!0,switchDeck(r,o))}}}}))}));